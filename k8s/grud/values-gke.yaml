# GKE cluster values
global:
  environment: gcp-gke
  namespace: grud

# Ingress configuration
# Grafana has its own LoadBalancer (not part of this ingress)
ingress:
  enabled: true
  host: grudapp.com
  className: ""
  annotations:
    kubernetes.io/ingress.class: "gce"
    kubernetes.io/ingress.global-static-ip-name: "grud-ingress-ip"

# Cloud SQL configuration
cloudSql:
  enabled: true
  privateIp: ""  # Set via --set cloudSql.privateIp

# Secret management - use Google Secret Manager
secrets:
  # For GKE: use External Secrets Operator with Google Secret Manager
  createKubernetesSecrets: false
  useExternalSecrets: true

  # Google Secret Manager configuration
  gcp:
    projectId: ""  # Set via --set or environment variable
    clusterLocation: europe-west1
    clusterName: grud-cluster
    serviceAccountName: grud-secrets-sa

    # Secret names in Google Secret Manager
    jwtSecretName: grud-jwt-secret
    studentDbSecretName: grud-student-db-credentials
    projectDbSecretName: grud-project-db-credentials

databases:
  student:
    # For GKE, these are loaded from Google Secret Manager
    host: ""  # Cloud SQL proxy or IP
    port: 5432

  project:
    host: ""  # Cloud SQL proxy or IP
    port: 5432

studentService:
  enabled: true
  replicaCount: 2
  config:
    env: gke
  useSecrets: true
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  # HPA - Horizontal Pod Autoscaler
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilization: 70
    targetMemoryUtilization: 80

projectService:
  enabled: true
  replicaCount: 2
  config:
    env: gke
  useSecrets: true
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  # HPA - Horizontal Pod Autoscaler
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilization: 70
    targetMemoryUtilization: 80

adminPanel:
  enabled: true
  replicaCount: 1
  ingress:
    enabled: true
    host: admin.grudapp.com
  service:
    type: ClusterIP
    port: 80
  resources:
    requests:
      memory: "256Mi"
      cpu: "200m"
    limits:
      memory: "512Mi"
      cpu: "500m"

# For GKE, databases are managed via Cloud SQL
studentDb:
  enabled: false

projectDb:
  enabled: false
