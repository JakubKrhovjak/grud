# GKE cluster values
# Databases and admin-panel disabled - using Cloud SQL

global:
  environment: gcp-gke
  namespace: grud

# Cloud SQL configuration
cloudSql:
  enabled: true
  # Connection name format: project:region:instance
  # Get with: cd terraform && terraform output cloudsql_instance_name
  connectionName: "rugged-abacus-483006-r5:europe-west1:grud-postgres"
  # Student database
  studentDatabase: university
  studentUser: student_user
  studentPassword: student_password_change_me
  # Project database
  projectDatabase: projects
  projectUser: project_user
  projectPassword: project_password_change_me

# Ingress for external access
ingress:
  enabled: true
  host: grudapp.com
  annotations: {}
  # For HTTPS, configure managed certificate:
  # annotations:
  #   networking.gke.io/managed-certificates: grud-cert
  tls: []

studentService:
  enabled: true
  replicaCount: 2
  config:
    env: gcp-gke
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 50m
      memory: 64Mi
  nodeSelector:
    node-type: app
  tolerations:
    - key: "workload"
      operator: "Equal"
      value: "app"
      effect: "NoSchedule"
  database:
    port: "5432"
    name: university
    secretName: student-db-credentials
  serviceAccount:
    gcpServiceAccount: student-service@rugged-abacus-483006-r5.iam.gserviceaccount.com

projectService:
  enabled: true
  replicaCount: 2
  config:
    env: gcp-gke
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 50m
      memory: 64Mi
  nodeSelector:
    node-type: app
  tolerations:
    - key: "workload"
      operator: "Equal"
      value: "app"
      effect: "NoSchedule"
  database:
    port: "5432"
    name: projects
    secretName: project-db-credentials
  serviceAccount:
    gcpServiceAccount: project-service@rugged-abacus-483006-r5.iam.gserviceaccount.com

# Disabled for GKE
adminPanel:
  enabled: false

studentDb:
  enabled: false

projectDb:
  enabled: false
