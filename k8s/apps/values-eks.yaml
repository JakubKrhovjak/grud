# EKS test cluster values
# Minimal setup: local DBs, no taint/nodeSelector (only system-pool nodes)
# Images from GCP Artifact Registry (public pull)

global:
  environment: aws-eks
  namespace: apps

cloudSql:
  enabled: false

ingress:
  enabled: true

# Student Service
studentService:
  enabled: true
  replicaCount: 1
  image:
    repository: 570617543021.dkr.ecr.eu-central-1.amazonaws.com/grud/student-service
    tag: "0.0.7"
    pullPolicy: Always
  resources:
    limits:
      cpu: 500m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  hpa:
    enabled: false
  nodeSelector: {}
  tolerations:
    - key: "workload"
      operator: "Equal"
      value: "app"
      effect: "NoSchedule"
  config:
    env: eks
    serverPort: "8080"
    grpcEndpoint: "project-service:50052"
    natsUrl: "nats://nats.infra.svc.cluster.local:4222"
    natsSubject: "student-messages"
    otelEndpoint: "http://localhost:4318"
    corsOrigins:
      - "*"
  database:
    host: "grud-cluster-postgres.ctgi2qomwq5x.eu-central-1.rds.amazonaws.com"
    port: "5432"
    name: university
    sslMode: require
    secretName: student-db-secret
  auth:
    jwtSecret: "eks-test-jwt-secret-change-in-production"
  serviceAccount:
    gcpServiceAccount: ""

# Project Service
projectService:
  enabled: true
  replicaCount: 1
  image:
    repository: 570617543021.dkr.ecr.eu-central-1.amazonaws.com/grud/project-service
    tag: "0.0.7"
    pullPolicy: Always
  resources:
    limits:
      cpu: 500m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  hpa:
    enabled: false
  nodeSelector: {}
  tolerations:
    - key: "workload"
      operator: "Equal"
      value: "app"
      effect: "NoSchedule"
  config:
    env: eks
    grpcPort: "50052"
    natsUrl: "nats://nats.infra.svc.cluster.local:4222"
    natsSubject: "student-messages"
    otelEndpoint: "http://localhost:4318"
  database:
    host: "grud-cluster-postgres.ctgi2qomwq5x.eu-central-1.rds.amazonaws.com"
    port: "5432"
    name: projects
    sslMode: require
    secretName: project-db-secret
  serviceAccount:
    gcpServiceAccount: ""

# Admin Panel
adminPanel:
  enabled: true
  replicaCount: 1
  config:
    apiUrl: "http://student-service:8080"
  image:
    repository: 570617543021.dkr.ecr.eu-central-1.amazonaws.com/grud/admin-panel
    tag: "0.0.7"
    pullPolicy: Always
  resources:
    limits:
      cpu: 200m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi
  nodeSelector: {}
  tolerations:
    - key: "workload"
      operator: "Equal"
      value: "app"
      effect: "NoSchedule"
  ingress:
    enabled: false
  service:
    type: ClusterIP
    port: 80

# In-cluster PostgreSQL disabled â€” using AWS RDS
studentDb:
  enabled: false

projectDb:
  enabled: false

# Secrets - simple Kubernetes secrets for testing
secrets:
  createKubernetesSecrets: true
  useExternalSecrets: false
  jwtSecret: "eks-test-jwt-secret-change-in-production"
  gcp:
    projectId: ""
    clusterLocation: ""
    clusterName: ""
    jwtSecretName: ""
    studentDbSecretName: ""
    projectDbSecretName: ""

databases:
  student:
    username: "student_user"
    password: "student1234"
    database: "university"
    host: "grud-cluster-postgres.ctgi2qomwq5x.eu-central-1.rds.amazonaws.com"
    port: 5432
  project:
    username: "project_user"
    password: "project1234"
    database: "projects"
    host: "grud-cluster-postgres.ctgi2qomwq5x.eu-central-1.rds.amazonaws.com"
    port: 5432
