# EKS test cluster values
# Minimal setup: local DBs, no taint/nodeSelector (only system-pool nodes)
# Images from GCP Artifact Registry (public pull)

global:
  environment: aws-eks
  namespace: apps

cloudSql:
  enabled: false

ingress:
  enabled: false

# Student Service
studentService:
  enabled: true
  replicaCount: 1
  image:
    repository: europe-west1-docker.pkg.dev/rugged-abacus-483006-r5/grud/student-service
    tag: "0.0.6"
    pullPolicy: Always
  resources:
    limits:
      cpu: 500m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  hpa:
    enabled: false
  # No nodeSelector/tolerations - schedule on any node (system-pool)
  nodeSelector: {}
  tolerations: []
  config:
    env: eks
    serverPort: "8080"
    grpcEndpoint: "project-service:50052"
    natsUrl: ""
    natsSubject: "student-messages"
    otelEndpoint: ""
    corsOrigins:
      - "*"
  database:
    host: student-db.apps.svc.cluster.local
    port: "5432"
    name: university
    sslMode: disable
    secretName: student-db-app
  auth:
    jwtSecret: "eks-test-jwt-secret-change-in-production"
  serviceAccount:
    gcpServiceAccount: ""

# Project Service
projectService:
  enabled: true
  replicaCount: 1
  image:
    repository: europe-west1-docker.pkg.dev/rugged-abacus-483006-r5/grud/project-service
    tag: "0.0.6"
    pullPolicy: Always
  resources:
    limits:
      cpu: 500m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  hpa:
    enabled: false
  nodeSelector: {}
  tolerations: []
  config:
    env: eks
    grpcPort: "50052"
    natsUrl: ""
    natsSubject: "student-messages"
    otelEndpoint: ""
  database:
    host: project-db.apps.svc.cluster.local
    port: "5432"
    name: projects
    sslMode: disable
    secretName: project-db-app
  serviceAccount:
    gcpServiceAccount: ""

# Admin Panel
adminPanel:
  enabled: true
  replicaCount: 1
  config:
    apiUrl: "http://student-service:8080"
  image:
    repository: europe-west1-docker.pkg.dev/rugged-abacus-483006-r5/grud/admin-panel
    tag: "0.0.8"
    pullPolicy: Always
  resources:
    limits:
      cpu: 200m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi
  nodeSelector: {}
  tolerations: []
  ingress:
    enabled: false
  service:
    type: NodePort
    port: 80
    nodePort: 30082

# Local PostgreSQL databases (like Kind)
studentDb:
  enabled: true
  replicaCount: 1
  image:
    repository: postgres
    tag: "15-alpine"
  resources:
    limits:
      cpu: 250m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  nodeSelector: {}
  tolerations: []
  storage:
    size: 1Gi
    storageClassName: gp2
  credentials:
    database: university
    username: student_user
    password: student_password

# Project Database
projectDb:
  enabled: true
  replicaCount: 1
  image:
    repository: postgres
    tag: "15-alpine"
  resources:
    limits:
      cpu: 250m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  nodeSelector: {}
  tolerations: []
  storage:
    size: 1Gi
    storageClassName: gp2
  credentials:
    database: projects
    username: project_user
    password: project_password

# Secrets - simple Kubernetes secrets for testing
secrets:
  createKubernetesSecrets: false
  useExternalSecrets: false
  jwtSecret: ""
  gcp:
    projectId: ""
    clusterLocation: ""
    clusterName: ""
    jwtSecretName: ""
    studentDbSecretName: ""
    projectDbSecretName: ""

databases:
  student:
    username: ""
    password: ""
    database: "university"
    host: ""
    port: 5432
  project:
    username: ""
    password: ""
    database: "projects"
    host: ""
    port: 5432
